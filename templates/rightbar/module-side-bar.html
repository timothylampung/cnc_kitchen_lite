{% load static %}

<div id="kt_sidebar" class="sidebar" data-kt-drawer="true" data-kt-drawer-name="sidebar"
     data-kt-drawer-activate="{default: true, xxl: false}" data-kt-drawer-overlay="true"
     data-kt-drawer-width="{default:'1200px', 'lg': '1200px'}" data-kt-drawer-direction="end"
     data-kt-drawer-toggle="#kt_sidebar_toggler">
    <!--begin::Sidebar Content-->

    <div class="d-flex flex-row  px-5 py-10">
        <button type="button" class="btn btn-icon btn-icon-white btn-active-color-primary me-n4"
                data-kt-menu-trigger="click" data-kt-menu-overflow="true" data-kt-menu-placement="bottom-end">
            <!--begin::Svg Icon | path: icons/duotune/general/gen024.svg-->
            <span class="svg-icon svg-icon-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">
                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                <rect x="5" y="5" width="5" height="5" rx="1" fill="currentColor"></rect>
                                <rect x="14" y="5" width="5" height="5" rx="1" fill="currentColor" opacity="0.3"></rect>
                                <rect x="5" y="14" width="5" height="5" rx="1" fill="currentColor" opacity="0.3"></rect>
                                <rect x="14" y="14" width="5" height="5" rx="1" fill="currentColor"
                                      opacity="0.3"></rect>
                            </g>
                        </svg>
                    </span>
            <!--end::Svg Icon-->
        </button>
        <h4 class="px-5 text-center text-white" id="module_ip"> Select Module</h4>

        <div id="modules_ips" class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-800
                    menu-state-bg-light-primary fw-bold w-200px py-3"
             data-kt-menu="true" style="">
            <!--begin::Heading-->
            <div class="menu-item px-3">
                <div class="menu-content text-muted pb-2 px-3 fs-7 text-uppercase">Actions</div>
            </div>
            <!--end::Heading-->
            <!--begin::Menu item-->
            <div class="menu-item px-3">
                <a type="button" onclick="startWorker()" class="menu-link px-3">Run Sets</a>
            </div>
            <!--end::Menu item-->
            <!--begin::Menu item-->
            <div class="menu-item px-3">
                <a type="button" onclick="promptDeleteQueuedBulk()" class="menu-link flex-stack px-3 text-danger">Clear
                    Sets
                    <i class="fas fa-exclamation-circle ms-2 fs-7" data-bs-toggle="tooltip" title=""
                       data-bs-original-title="Clear all the task"
                       aria-label="Clear all the task"></i></a>
            </div>
            <!--end::Menu item-->
        </div>


    </div>

    <div class="d-flex flex-column sidebar-body px-5 py-10" id="kt_sidebar_body">
        <!--begin::Sidebar Nav-->
        <ul style="  overflow-x: auto;
                overflow-y: hidden;
                flex-wrap: nowrap;" class="sidebar-nav nav nav-tabs mb-10" id="kt_sidebar_tabs" role="tablist">

            <li class="nav-item p-1">
                <a class="nav-link" data-bs-toggle="tab" data-kt-countup-tabs="true" href="#queued_tab">
                    <!--begin::Svg Icon | path: icons/duotune/abstract/abs038.svg-->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                         fill="white" class="bi bi-view-list" viewBox="0 0 16 16">
                        <path d="M3 4.5h10a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H3a2
                        2 0 0 1-2-2v-3a2 2 0 0 1 2-2zm0 1a1 1 0 0 0-1 1v3a1 1 0 0 0 1
                        1h10a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1H3zM1 2a.5.5 0 0 1 .5-.5h13a.5.5 0
                        0 1 0 1h-13A.5.5 0 0 1 1 2zm0 12a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0
                        1h-13A.5.5 0 0 1 1 14z"/>
                    </svg>
                    <!--end::Svg Icon-->
                </a>
            </li>
            <li class="nav-item p-1">
                <a class="nav-link" data-bs-toggle="tab" data-kt-countup-tabs="true" href="#running_tab">
                    <!--begin::Svg Icon | path: icons/duotune/abstract/abs038.svg-->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                         class="bi bi-ui-checks-grid" viewBox="0 0 16 16">
                        <path d="M2 10h3a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H2a1
                        1 0 0 1-1-1v-3a1 1 0 0 1 1-1zm9-9h3a1 1 0 0 1 1 1v3a1 1
                        0 0 1-1 1h-3a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zm0 9a1 1 0 0 0-1
                        1v3a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-3zm0-10a2
                        2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2V2a2 2 0 0
                        0-2-2h-3zM2 9a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0
                        2-2v-3a2 2 0 0 0-2-2H2zm7 2a2 2 0 0 1 2-2h3a2 2 0 0 1 2
                        2v3a2 2 0 0 1-2 2h-3a2 2 0 0 1-2-2v-3zM0 2a2 2 0 0 1
                        2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H2a2 2 0 0
                        1-2-2V2zm5.354.854a.5.5 0 1 0-.708-.708L3 3.793l-.646-.647a.5.5 0 1
                        0-.708.708l1 1a.5.5 0 0 0 .708 0l2-2z"/>
                    </svg>
                    <!--end::Svg Icon-->
                </a>
            </li>
            <li class="nav-item p-1">
                <a class="nav-link" data-bs-toggle="tab" data-kt-countup-tabs="true" href="#completed_tab">
                    <!--begin::Svg Icon | path: icons/duotune/abstract/abs038.svg-->
                    <svg xmlns="http://www.w3.org/2000/svg"
                         width="24" height="24" fill="green"
                         class="bi bi-check-square-fill" viewBox="0 0 16 16">
                        <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0
                        2-2V2a2 2 0 0 0-2-2H2zm10.03 4.97a.75.75 0 0 1
                        .011 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75
                        0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.75.75 0 0 1 1.08-.022z"/>
                    </svg>
                    <!--end::Svg Icon-->
                </a>
            </li>
            <li class="nav-item p-1">
                <a class="nav-link" data-bs-toggle="tab" data-kt-countup-tabs="true" href="#failed_tab">
                    <!--begin::Svg Icon | path: icons/duotune/abstract/abs038.svg-->
                    <svg xmlns="http://www.w3.org/2000/svg"
                         width="24" height="24" fill="orange" class="bi bi-exclamation-triangle-fill"
                         viewBox="0 0 16 16">
                        <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96
                        0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889
                        0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0
                        .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1
                        5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                    </svg>
                    <!--end::Svg Icon-->
                </a>
            </li>

        </ul>
        <!--end::Sidebar Nav-->
        <!--begin::Sidebar Content-->
        <div id="kt_sidebar_content">
            <div class="hover-scroll-y" data-kt-scroll="true" data-kt-scroll-height="auto"
                 data-kt-scroll-offset="0px" data-kt-scroll-dependencies="#kt_sidebar_tabs"
                 data-kt-scroll-wrappers="#kt_sidebar_content, #kt_sidebar_body">
                <!--begin::Tab content-->
                <div class="tab-content px-5 px-xxl-10">
                    <!--begin::Tab pane-->
                    {% include 'rightbar/queued-tab.html' %}
                    {% include 'rightbar/finished-tab.html' %}
                    {% include 'rightbar/failed-tab.html' %}
                    {% include 'rightbar/started-tab.html' %}
                    <!--end::Tab pane-->
                    <!--begin::Tab pane-->
                    <!--end::Tab pane-->
                </div>
                <!--end::Tab content-->
            </div>
        </div>
        <!--end::Sidebar Content-->
    </div>
    <!--end::Sidebar Content-->
</div>

{% block child_scripts %}
    {% include 'rightbar/module_side_bar_scripts.html' %}
    {% include 'rightbar/queued_tasks_scripts.html' %}
    {% include 'rightbar/started_tasks_scripts.html' %}
    {% include 'rightbar/finished_tasks_scripts.html' %}
    {% include 'rightbar/failed_tasks_scripts.html' %}
    <script>

        function load_tasks() {
            console.log(';oaded')
            get_module_index();
            let index = getQueueIndex();
            get_queued_data(index);
            get_started_data(index);
            get_finished_data(1);
            get_failed_data(index);
        }
    </script>
{% endblock %}
